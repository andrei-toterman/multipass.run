{% macro nav_logo() %}
<div class="p-navigation__banner">
  <div class="p-navigation__tagged-logo">
    <a class="p-navigation__link" href="/">
      <div class="p-navigation__logo-tag">
        <img class="p-navigation__logo-icon" src="https://assets.ubuntu.com/v1/7b658b39-Favicon+-+Multipass.svg" alt="">
      </div>
      <span class="p-navigation__logo-title">Canonical Multipass</span>
    </a>
  </div>
  <a href="#navigation" class="p-navigation__toggle--open" title="menu">Menu</a>
  <a href="#navigation-closed" class="p-navigation__toggle--close" title="close menu">Close menu</a>
</div>
{% endmacro %}

{% macro nav_search() %}
<section id="search-docs" class="p-strip--light is-shallow">
  <div class="l-docs__main">
    <div class="row">
      <form class="p-search-box u-no-margin--bottom" action="/docs/search">
        <input type="search" class="p-search-box__input" name="q" {% if query %}value="{{ query }}"{% endif %} placeholder="Search documentation" required/>
        <button type="submit" class="p-search-box__button" alt="search"><i class="p-icon--search">Search</i></button>
      </form>
    </div>
  </div>
</section>
{% endmacro %}

{% macro nav_items() %}
<nav class="p-navigation__nav" role="menubar">
  <span class="u-off-screen">
    <a href="#main-content">Jump to main content</a>
  </span>
  <ul class="p-navigation__items" role="menu">
    <li class="p-navigation__item {% if '/install' in request.path %}is-selected{% endif %}" role="menuitem">
      <a class="p-navigation__link" href="/install">Install</a>
    </li>
    <li class="p-navigation__item {% if '/docs' in request.path %}is-selected{% endif %}" role="menuitem">
      <a class="p-navigation__link" href="/docs">Docs</a>
    </li>
    <li class="p-navigation__item" role="menuitem">
      <a class="p-navigation__link" href="https://discourse.ubuntu.com/c/multipass">Discourse</a>
    </li>
  </ul>
  <ul class="p-navigation__items global-nav">
  </ul>
</nav>
{% endmacro %}

<header id="navigation" class="p-navigation is-dark">
{% if is_docs %}
  <div class="l-docs__subgrid">
    <div class="l-docs__sidebar">
      {{ nav_logo() }}
    </div>
    <div class="l-docs__main">
      {{ nav_items() }}
    </div>
  </div>
{% else %}
  <div class="p-navigation__row--25-75">
    {{ nav_logo() }}
    {{ nav_items() }}
  </div>
{% endif %}
</header>
